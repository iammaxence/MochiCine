{"ast":null,"code":"var _jsxFileName = \"/home/neko/git/MochiCine/React/src/Commentaires.js\";\nimport React from 'react';\nimport axios from \"axios\";\nimport EcrireMessage from \"./EcrireMessage\";\n\nclass Commentaires extends React.Component {\n  constructor(props) {\n    super(props); //login, id_message, comments, isconnected\n\n    this.state = {\n      comments: [],\n      statut: \"\",\n      textError: \"\"\n    };\n    this.deleteMessage = this.deleteMessage.bind(this);\n  } //Mettre a jour s'il y a un changement dans la liste de commentaire\n\n\n  componentDidMount() {\n    this.setState({\n      comments: this.props.comments\n    });\n  } //Gestion Commentaire:\n\n\n  addComment(comment) {\n    if (comment.length > 0) {\n      const url = new URLSearchParams();\n      url.append('user', this.props.login);\n      url.append('id_message', this.props.id_message);\n      url.append('comment', comment);\n      axios.get('http://localhost:8080/MochiCine/Comment/Add?' + url).then(response => this.updateComment(response));\n    }\n  }\n\n  updateComment(rep) {\n    //console.log(rep.data)\n    if (rep.data[\"code\"]) {\n      this.setState({\n        statut: \"error\",\n        textError: rep.data[\"commentaire\"]\n      });\n      window.confirm(this.state.textError);\n    } else {\n      this.state.comments.unshift(rep.data[\"comment\"]);\n    }\n  }\n\n  deleteMessage(id_commentaire, index) {\n    if (window.confirm(\"Voulez-vous supprimer ce commentaire ?\")) {\n      const url = new URLSearchParams();\n      url.append('id_message', this.props.id_message);\n      url.append('comId', id_commentaire);\n      axios.get('http://localhost:8080/MochiCine/Comment/Delete?' + url).then(response => this.delete(response, index));\n    }\n  }\n\n  delete(rep, index) {\n    if (rep.data[\"code\"]) {\n      this.setState({\n        statut: \"error\",\n        textError: rep.data[\"message\"]\n      });\n      window.confirm(this.state.textError);\n    } else {\n      //Cela permet de faire une copie de notre liste de message:\n      const newList = Object.assign([], this.state.comments);\n      newList.splice(index, 1); //console.log(\"deleteCommentaire: \",newList);\n\n      this.setState({\n        comments: newList\n      });\n    }\n  }\n\n  getListCommentaires() {}\n\n  render() {\n    let box;\n    this.props.isConnected === true ? box = /*#__PURE__*/React.createElement(EcrireMessage, {\n      addMessage: this.addComment.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 44\n      }\n    }) : box = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 110\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comments-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn fas fa-comment\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#collapseCom\",\n      \"aria-expanded\": \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"collapseCom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 4\n      }\n    }, this.getListCommentaires(), box));\n  }\n\n}\n\nexport default Commentaires;","map":{"version":3,"sources":["/home/neko/git/MochiCine/React/src/Commentaires.js"],"names":["React","axios","EcrireMessage","Commentaires","Component","constructor","props","state","comments","statut","textError","deleteMessage","bind","componentDidMount","setState","addComment","comment","length","url","URLSearchParams","append","login","id_message","get","then","response","updateComment","rep","data","window","confirm","unshift","id_commentaire","index","delete","newList","Object","assign","splice","getListCommentaires","render","box","isConnected"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from \"axios\";\nimport EcrireMessage from \"./EcrireMessage\";\n\n\n\nclass Commentaires extends React.Component {\n\tconstructor(props){\n    \tsuper(props); //login, id_message, comments, isconnected\n    \tthis.state={comments:[], statut:\"\", textError:\"\"};\n    \tthis.deleteMessage=this.deleteMessage.bind(this);\n\t}\n\n\t//Mettre a jour s'il y a un changement dans la liste de commentaire\n\tcomponentDidMount(){\n\t\tthis.setState({comments: this.props.comments});\n\t}\n\n\t//Gestion Commentaire:\n\taddComment(comment){\n\t\tif(comment.length >0){\n\t\t\tconst url = new URLSearchParams();\n \t\t\turl.append('user',this.props.login);\n \t\t\turl.append('id_message', this.props.id_message);\n \t\t\turl.append('comment', comment);\n \t\t\taxios.get('http://localhost:8080/MochiCine/Comment/Add?' + url).then(response => this.updateComment(response));\n\t\t}\n\t}\n\tupdateComment(rep){\n\t\t//console.log(rep.data)\n\t\tif(rep.data[\"code\"]){\n\t  \t\tthis.setState ({statut: \"error\", textError: rep.data[\"commentaire\"]});\n\t  \t\twindow.confirm(this.state.textError);\n\t  \t}else{\n\t  \t\tthis.state.comments.unshift(rep.data[\"comment\"]);\n\t  \t}\n\t}\n\n\n\tdeleteMessage(id_commentaire, index){\n\t\tif(window.confirm(\"Voulez-vous supprimer ce commentaire ?\")){\n\t\t\tconst url = new URLSearchParams();\n            url.append('id_message', this.props.id_message);\n            url.append('comId', id_commentaire);\n \t\t\taxios.get('http://localhost:8080/MochiCine/Comment/Delete?' + url).then(response => this.delete(response, index));\n\t\t}\n\t}\n\tdelete(rep, index){\n\t\tif(rep.data[\"code\"]){\n\t  \t\tthis.setState ({statut: \"error\", textError: rep.data[\"message\"]});\n\t  \t\twindow.confirm(this.state.textError);\n\t  \t}else{\n\t  \t\t//Cela permet de faire une copie de notre liste de message:\n\t  \t\tconst newList = Object.assign([], this.state.comments);\n\t  \t\tnewList.splice(index,1);\n\t  \t\t//console.log(\"deleteCommentaire: \",newList);\n\t  \t\tthis.setState({comments: newList});\n\t  \t}\n\t}\n\n\tgetListCommentaires(){\n\n\t}\n\n\n\n\trender(){\n\t\tlet box;\n\t\t(this.props.isConnected === true)? box = <EcrireMessage addMessage={this.addComment.bind(this)} /> : box = <div></div>;\n\t\treturn(\n\t\t<div className=\"comments-group\" >\n\t\t\t<button className=\"btn fas fa-comment\" data-toggle=\"collapse\" data-target=\"#collapseCom\" aria-expanded=\"false\">\n\t\t\t</button>\n\t\t\t<div className=\"collapse\" id=\"collapseCom\">\n\t\t\t\t{this.getListCommentaires()}\n\t\t\t\t{box}\n\t\t\t</div>\n\t\t</div>\n);\n\t}\n}\n\nexport default Commentaires"]},"metadata":{},"sourceType":"module"}