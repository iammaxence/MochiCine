{"ast":null,"code":"var _jsxFileName = \"/home/neko/git/MochiCine/React/src/ListFavoris.js\";\nimport React from 'react';\nimport axios from \"axios\";\n\nclass ListFavoris extends React.Component {\n  constructor(props) {\n    super(props); //login\n\n    this.state = {\n      movies: [],\n      series: []\n    };\n  }\n\n  componentDidMount() {\n    // Recupere les Favoris de l'utilisateur \n    const url = new URLSearchParams();\n    url.append('login', this.props.login);\n    axios.get('http://localhost:8080/MochiCine/Favoris/List?' + url).then(response => this.lister(response));\n  }\n\n  lister(rep) {\n    console.log(rep.data);\n\n    if (rep.data != null) {\n      if (rep.data[\"code\"]) {\n        this.setState({\n          statut: \"error\",\n          textError: rep.data[\"message\"]\n        });\n        window.confirm(this.state.textError);\n      } else {\n        let films = rep.data[\"movie\"];\n        this.setState({\n          series: rep.data[\"data\"],\n          movies: films[0]\n        });\n        this.updateMain();\n      }\n    }\n  }\n\n  formatDate(string) {\n    var options = {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    };\n    return new Date(string).toLocaleDateString([], options);\n  }\n\n  deleteFavoris(id, nb, index) {\n    const url = new URLSearchParams();\n    url.append('login', this.props.login);\n    url.append('id', id);\n    nb === 0 ? url.append('isSerie', \"false\") : url.append('isSerie', 'true');\n    axios.get('http://localhost:8080/MochiCine/Favoris/Delete?' + url).then(response => this.result(response, nb, index));\n  }\n\n  result(rep, nb, index) {\n    if (rep.data[\"code\"]) {\n      this.setState({\n        statut: \"error\",\n        textError: rep.data[\"message\"]\n      });\n      window.confirm(this.state.textError);\n    } else {\n      console.log(\"deleteFavoris : ok\");\n\n      if (nb === 0) {\n        const list = Object.assign([], this.state.movies);\n        list.splice(index, 1);\n        this.setState({\n          movies: list\n        });\n        console.log(\"movies : \", this.state.movies);\n      } else {\n        const newList = Object.assign([], this.state.series);\n        newList.splice(index, 1);\n        this.setState({\n          series: newList\n        });\n      }\n\n      this.updateMain();\n    }\n  }\n\n  updateMain() {\n    const list = [];\n    this.state.movies.forEach(function (item, index, array) {\n      list.push(item.original_title);\n    });\n    this.state.series.forEach(function (item, index, array) {\n      list.push(item.original_name);\n    }); //console.log(list);\n\n    this.props.setListFavoris(list);\n  }\n\n  getBox(item, index) {\n    let nb = item.number_of_seasons || 0;\n    let choix;\n\n    if (nb === 0) {\n      choix = \"film\";\n    } else {\n      choix = nb + \" saisons\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"favorisBox col-md-12 bg-white text-dark\",\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-entry  col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"leftbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://image.tmdb.org/t/p/w500/\" + item.backdrop_path,\n      alt: \"pic_of_\" + item.title,\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"rightbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text text-2 text-center pl-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mb-2\",\n      onClick: () => this.props.getDescriptionPage(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }, item.original_title || item.original_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"meta-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"meta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-calendar-alt mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 39\n      }\n    }), this.formatDate(item.first_air_date || item.release_date)), \"\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-fire-alt mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 39\n      }\n    }), item.popularity), \"\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-tv mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 39\n      }\n    }), choix, \" \"))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, item.overview), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-outline-danger\",\n      type: \"button\",\n      onClick: () => this.deleteFavoris(item.id, nb, index),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, \"Delete Favoris\")))));\n  }\n\n  render() {\n    let series;\n    let movies;\n\n    if (this.state.series.length > 0) {\n      let cpt = 0;\n      series = this.state.series.map(item => {\n        if (item.backdrop_path !== null && item.backdrop_path !== undefined) {\n          let box = this.getBox(item, cpt);\n          cpt = cpt + 1;\n          return box;\n        }\n      });\n    }\n\n    if (this.state.movies.length > 0) {\n      let cpt2 = 0;\n      movies = this.state.movies.map(item => {\n        if (item.backdrop_path !== null && item.backdrop_path !== undefined) {\n          let box = this.getBox(item, cpt2);\n          cpt2 = cpt2 + 1;\n          return box;\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ListFavoris col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pt-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, series, movies));\n  }\n\n}\n\nexport default ListFavoris;","map":{"version":3,"sources":["/home/neko/git/MochiCine/React/src/ListFavoris.js"],"names":["React","axios","ListFavoris","Component","constructor","props","state","movies","series","componentDidMount","url","URLSearchParams","append","login","get","then","response","lister","rep","console","log","data","setState","statut","textError","window","confirm","films","updateMain","formatDate","string","options","year","month","day","Date","toLocaleDateString","deleteFavoris","id","nb","index","result","list","Object","assign","splice","newList","forEach","item","array","push","original_title","original_name","setListFavoris","getBox","number_of_seasons","choix","backdrop_path","title","getDescriptionPage","first_air_date","release_date","popularity","overview","render","length","cpt","map","undefined","box","cpt2"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from \"axios\";\n\nclass ListFavoris extends React.Component {\n    constructor(props){\n        super(props); //login\n        this.state ={movies: [], series: []};\n\n    }\n\n    componentDidMount(){\n        // Recupere les Favoris de l'utilisateur \n        const url = new URLSearchParams();\n        url.append('login', this.props.login);\n        axios.get('http://localhost:8080/MochiCine/Favoris/List?'+url).then(response => this.lister(response));\n    }\n\n    lister(rep){\n        console.log(rep.data);\n        if(rep.data != null){\n            if(rep.data[\"code\"]){\n                this.setState ({statut: \"error\", textError: rep.data[\"message\"]});\n                window.confirm(this.state.textError);\n            }else{\n                let films =rep.data[\"movie\"];\n                this.setState({series: rep.data[\"data\"], movies: films[0]});\n                this.updateMain();\n            } \n        }\n    }\n\n    formatDate(string){\n        var options = { year: 'numeric', month: 'long', day: 'numeric' };\n        return new Date(string).toLocaleDateString([],options);\n    }\n\n    deleteFavoris(id, nb, index){\n        const url = new URLSearchParams();\n        url.append('login', this.props.login);\n        url.append('id', id);\n        (nb === 0)? url.append('isSerie', \"false\"): url.append('isSerie', 'true');\n        axios.get('http://localhost:8080/MochiCine/Favoris/Delete?'+url).then(response => this.result(response, nb, index));\n    }\n\n    result(rep, nb, index){\n        if(rep.data[\"code\"]){\n            this.setState ({statut: \"error\", textError: rep.data[\"message\"]});\n            window.confirm(this.state.textError);\n        }else{\n            console.log(\"deleteFavoris : ok\");\n            \n            if(nb === 0){\n                const list= Object.assign([], this.state.movies);\n                list.splice(index,1);\n                this.setState({movies: list});\n                console.log(\"movies : \", this.state.movies );\n            }else{\n                const newList= Object.assign([], this.state.series);\n                newList.splice(index,1);\n                this.setState({series: newList});\n            }\n            this.updateMain();\n        } \n   }\n\n   updateMain(){\n    const list = [];\n\n    this.state.movies.forEach(function(item, index, array){\n        list.push(item.original_title);\n    });\n    this.state.series.forEach(function(item, index, array){\n        list.push(item.original_name);\n    });\n\n    //console.log(list);\n\n    this.props.setListFavoris(list);\n\n   }\n\n\n\n    getBox(item, index){\n        let nb = (item.number_of_seasons || 0);\n        let choix;\n        if(nb === 0){\n            choix=\"film\";\n        }else{\n            choix=nb+\" saisons\";\n        }\n\n        return(\n                <div className=\"favorisBox col-md-12 bg-white text-dark\" key={item.id}>\n                <div className=\"blog-entry  col-12\">\n                    <div id = \"leftbox\">\n                        <img src={\"https://image.tmdb.org/t/p/w500/\"+item.backdrop_path} alt={\"pic_of_\"+item.title} width=\"100%\"  />\n                    </div>\n                    <div id = \"rightbox\">\n                        <div className=\"text text-2 text-center pl-md-4\">\n                            <h3 className=\"mb-2\"  onClick={() => this.props.getDescriptionPage(item)} >{(item.original_title || item.original_name)}</h3>\n                        </div>\n                        <div className=\"meta-wrap\">\n                            <p className=\"meta\">\n                                <span><i className=\"far fa-calendar-alt mr-2\"></i>{this.formatDate((item.first_air_date || item.release_date))}</span>\n                                &nbsp;&nbsp;&nbsp;&nbsp;\n                                <span><i className=\"fas fa-fire-alt mr-2\"></i>{item.popularity}</span>\n                                &nbsp;&nbsp;&nbsp;&nbsp;\n                                <span><i className=\"fas fa-tv mr-2\"></i>{ choix } </span>\n                            </p>\n                        </div>\n                        <p className=\"mb-4\">\n                            {item.overview}\n                        </p>\n                        <p>\n                        <button className=\"btn btn-sm btn-outline-danger\" type=\"button\" onClick={() => this.deleteFavoris(item.id, nb, index)}>Delete Favoris</button>\n                        </p>\n                    </div>\n                </div>\n            </div>\n            );\n        \n    }\n    \n\n    render(){\n        let series;\n        let movies;\n        \n\n        if(this.state.series.length > 0){\n            let cpt=0;\n            series = this.state.series.map( item => {\n                if(item.backdrop_path!==null && item.backdrop_path!==undefined){\n                    let box = (this.getBox(item, cpt));\n                    cpt=cpt+1;\n                    return box;\n                }\n            });\n        }\n\n        if(this.state.movies.length > 0){\n            let cpt2=0;\n            movies = this.state.movies.map( item => {\n                if(item.backdrop_path!==null && item.backdrop_path!==undefined){\n                    let box = (this.getBox(item, cpt2));\n                    cpt2=cpt2+1;\n                    return box;\n                }\n            });\n        }\n\n        return(\n            <div className=\"ListFavoris col\">\n                <div className=\"row pt-md-3\">\n                    {series}\n                    {movies}\n\n                </div>\n            </div>\n        );\n    }\n\n\n\n}\n\nexport default ListFavoris;"]},"metadata":{},"sourceType":"module"}